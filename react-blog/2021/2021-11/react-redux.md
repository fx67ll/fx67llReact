# ä½¿ç”¨Reduxå¿«é€Ÿå…¥é—¨ä¸Šæ‰‹Reactå…¨å±€çŠ¶æ€ç®¡ç†(React@16.8ä¹‹åçš„Hookç‰ˆæœ¬+Redux@Toolkit)


å…ˆè¯´ä¸€äº›åºŸè¯ï¼Œç›¸ä¿¡å¤§å®¶åœ¨å­¦ä¹ æ–°æŠ€æœ¯çš„æ—¶å€™ï¼Œä¸€å®šä¼šå…ˆä»å®˜æ–¹æ–‡æ¡£å…¥æ‰‹ï¼Œç„¶åå°±ç€ä¸€äº›æ€»ç»“æ¯”è¾ƒå¥½çš„æŠ€æœ¯åšå®¢ï¼Œæ¥ä¸€èµ·é£Ÿç”¨ğŸœå­¦ä¹ ã€‚
ä¸è¿‡ï¼Œå‰ç«¯æŠ€æœ¯æ ˆçš„æ›´æ–°ğŸš€é€Ÿåº¦ä¸å¯è°“ä¸å¿«ï¼Œå‡ ä¹æ¯è¿‡ä¸€ä¸¤å¹´éƒ½ä¼šä¸€äº›é‡å¤§çš„ç‰ˆæœ¬æ›´æ–°ğŸš€å‘å¸ƒï¼Œæœ‰äº›æ—¶å€™å­¦ä¹ æ–°æŠ€æœ¯ï¼Œä¼šæœ‰å¤§é‡çš„ ***è€ç‰ˆæœ¬***  åšå®¢ğŸ“šï¼Œ
ä»–ä»¬å†™çš„éå¸¸å¥½ï¼Œä½†æ˜¯å¾€å¾€ä¸ä¼šæ³¨æ˜å½“æ—¶çš„ç‰ˆæœ¬ï¼Œå¯¼è‡´æˆ‘ä»¬åœ¨æœç´¢çš„æ—¶å€™ç»å¸¸çœ‹äº†åŠå¤©ï¼Œå´å‘ç°å’Œå®˜æ–¹çš„æ–°å†™æ³•æœ‰æ¯”è¾ƒå¤§çš„å·®å¼‚ï¼Œå¯¹äºå…¥é—¨çš„åŒå­¦ååˆ†ä¸å‹å¥½ğŸ˜µï¸~
æ‰€ä»¥ï¼Œåœ¨ä»Šå¤©å¼€å§‹æˆ‘ä»¬çš„æŠ€æœ¯åšå®¢ä¹‹å‰ï¼Œå…ˆè¯´æ˜ï¼Œæœ¬æ•™ç¨‹çš„ç›®æ ‡å¯¹è±¡âœ¨ï¼š  
1. åˆšå…¥é—¨å­¦ä¹ `React`æƒ³è¦å­¦ä¹ å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨Reduxçš„åŒå­¦âœ”ï¸  
2. å¯¹äº`React@16.8`çš„Hookç‰ˆæœ¬ä¹‹åçš„`React`è¯­æ³•æœ‰åŸºæœ¬äº†è§£çš„åŒå­¦âœ”ï¸  
3. å¯¹äº`Redux`å„ç§ä¸­é—´ä»¶ï¼Œå„ç§é…ç½®ï¼Œå„ç§ç›®å½•è§„èŒƒé…ç½®ååˆ†å¤´ç–¼çš„åŒå­¦ï¼ˆæœ¬æ•™ç¨‹ä½¿ç”¨åŸºæœ¬éƒ½æ˜¯`Redux@Toolkit`ç°ä»£å·¥å…·åŒ…å¤§å¹…ç®€åŒ–ä¹‹åçš„æ“ä½œï¼‰âœ”ï¸  

å¥½äº†åºŸè¯è¯´å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹æˆ‘ä»¬ä»Šå¤©è¦å­¦ä¹ çš„å†…å®¹~


### ä»€ä¹ˆæ˜¯Redux?
`Redux`æ˜¯`JavaScriptçŠ¶æ€å®¹å™¨`ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†ã€‚å®ƒå¯ä»¥è®©ä½ æ„å»ºä¸€è‡´åŒ–çš„åº”ç”¨ï¼Œè¿è¡Œäºä¸åŒçš„ç¯å¢ƒï¼ˆå®¢æˆ·ç«¯ã€æœåŠ¡å™¨ã€åŸç”Ÿåº”ç”¨ï¼‰ï¼Œå¹¶ä¸”æ˜“äºæµ‹è¯•  


### ä»€ä¹ˆæ—¶å€™ä½¿ç”¨Redux?
è¯´è¯´æˆ‘çš„é€šä¿—ç†è§£ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€äº›å¤§å‹çš„`React`é¡¹ç›®ä¸­å¼€å‘çš„æ—¶å€™ï¼Œå¾€å¾€æœ‰å¾ˆå¤šæ—¶å€™ä¼šéœ€è¦ç”¨åˆ°å…¨å±€çš„çŠ¶æ€é€šä¿¡æˆ–è€…æ·±åº¦çš„æ ‘ç»“æ„åµŒå¥—ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œ
å¦‚æœæˆ‘ä»¬ç”¨å•é¡¹æ•°æ®æµå»é€šä¿¡ï¼Œä¼šä½¿æˆ‘ä»¬çš„å¼€å‘å¢åŠ äº†æå¤§çš„å¤æ‚åº¦ï¼Œè¿™ä¸ªæ—¶å€™`Redux`å°±å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªç—›ç‚¹ï¼Œä»–å¯ä»¥å¸®æˆ‘ä»¬åœ¨å…¨å±€ç®¡ç†æˆ‘ä»¬éœ€è¦é€šä¿¡çš„çŠ¶æ€ï¼Œ
å¤§å¤§ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘å¤æ‚åº¦ï¼Œä»–ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªä½¿ç”¨åœºæ™¯ï¼š
1. æ— å…±åŒçˆ¶ç»„ä»¶çš„å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„é€šä¿¡  
2. éœ€è¦å…¨å±€æ›´æ–°çŠ¶æ€çš„ç»„ä»¶ï¼Œæ¯”å¦‚ä¸€äº›æƒé™æ§åˆ¶  
3. åº”å¯¹çŠ¶æ€æ ‘è¿‡äºå¤æ‚çš„æ—¶å€™ï¼Œæ¯”å¦‚ç»„ä»¶æ·±åº¦åµŒå¥—ä¹‹åï¼Œä¸Šå±‚ç»„ä»¶å’Œåº•å±‚ç»„ä»¶çš„é€šä¿¡  
4. å­˜åœ¨çŠ¶æ€éœ€è¦ä»¥å¾ˆå¤šä¸åŒçš„æ–¹å¼å»æ›´æ–°  
5. ä¸€äº›ç®€å•çš„åœºæ™¯ä¹Ÿé€‚ç”¨ï¼Œä¸è¿‡æ²¡æœ‰é‚£ä¹ˆå¿…è¦ï¼Œä½¿ç”¨è·¯ç”±ä¼ å‚æˆ–è€…ç»„ä»¶é€šä¿¡å°±å¯ä»¥å¿«é€Ÿè§£å†³æˆ‘ä»¬çš„éœ€æ±‚  

ä¸‹é¢è¿™å¼ å›¾å¯ä»¥éå¸¸ç›´è§‚çš„å±•ç¤ºä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦`Redux`  
![why-we-need-redux](img/why-we-need-redux.png "why-we-need-redux")


### ä»€ä¹ˆæ˜¯Redux@Toolkitï¼Ÿ
å®ƒæ˜¯Reduxå®˜æ–¹æ¨å‡ºçš„ä¸€ä¸ª`Reduxå·¥å…·é›†`ï¼ˆç®€ç§°`RTK`)ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¤§å®¶å¤§å¤§ç®€åŒ–storeçš„é…ç½®ï¼Œå‡å°‘`Redux`å…¶ä»–å¼€å‘ä¾èµ–åŒ…çš„å®‰è£…ï¼Œå¹¶å‡å°‘ä¹¦å†™å¤§é‡çš„æ¨¡æ¿ä»£ç ã€‚
å¦‚æœä½ ä½¿ç”¨çš„æ˜¯`Chormeæµè§ˆå™¨`ï¼Œé‚£ä¹ˆï¼Œæˆ‘æ¨èå®‰è£…ä¸€ä¸‹`React DevTools`å’Œ`Redux DevTools`è¿™ä¸¤ä¸ªæ‹“å±•ï¼Œå®ƒä»¬èƒ½å¸®ä½ å¾ˆç›´è§‚çš„çœ‹åˆ°æ•°æ®çš„æµå‘å’Œæ“ä½œå†å²    


### åœ¨å¼€å§‹ä½¿ç”¨ä¹‹å‰è®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹Reduxçš„ä¸€äº›åŸºæœ¬æœ¯è¯­å’Œè¿è¡Œè§„åˆ™  
1. `Immutability`ä¸å˜æ€§  
2. Actionè¡ŒåŠ¨  
3. ActionCreatorsè¡ŒåŠ¨åˆ›é€ è€…  
4. Reducerså‡é€Ÿå™¨  
5. Storeå•†åº—  
6. Dispatché€‰æ‹©  
(å‘¨æœ«è®°å¾—å†™ä¸€ä¸‹é“¾æ¥)

#### Immutabilityä¸å˜æ€§
å®˜æ–¹æ–‡æ¡£ä¸­è¿™æ ·æè¿°ä¸å˜æ€§ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ`JavaScript`å¯¹è±¡æˆ–æ•°ç»„éƒ½æ˜¯å¯å˜çš„ï¼Œè¿™æ ·ç›´æ¥æ”¹å˜å¯¹è±¡æˆ–æ•°ç»„ï¼Œæ„å‘³ç€å¼•ç”¨åœ°å€è¢«æ”¹å˜ï¼Œ
åœ¨`Redux`ä¸­ï¼Œä¸ºäº†ä¸€æˆä¸å˜çš„æ›´æ–°å€¼ï¼Œä½ çš„ä»£ç å¿…é¡»å¤åˆ¶ç°æœ‰çš„å¯¹è±¡æˆ–æ•°ç»„ï¼Œç„¶åä¿®æ”¹å‰¯æœ¬  

é€šä¿—ç‚¹è¯´å°±æ˜¯ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨å¯¹è±¡å’Œæ•°ç»„åšäº†æµ…æ‹·è´æ“ä½œä¹‹åå¤„ç†å‰¯æœ¬ï¼Œè€Œæ˜¯åº”è¯¥æ·±æ‹·è´ä¹‹åå†ä¿®æ”¹å‰¯æœ¬çš„å€¼ï¼Œä¿è¯å¼•ç”¨åœ°å€çš„åŸå€¼ä¸è¢«ä¿®æ”¹  
`Redux`æœŸæœ›æ‰€æœ‰çŠ¶æ€æ›´æ–°éƒ½æ˜¯ä¸€æˆä¸å˜çš„

#### Actionæ“ä½œ  
`Action`æ˜¯ä¸€ä¸ªåŒ…å«`type`å±æ€§çš„`JavaScript`å¯¹è±¡ï¼Œæ“ä½œè§†ä¸ºæè¿°åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿçš„äº‹æƒ…çš„äº‹ä»¶  
```
const addExampleAction = {
	type: "example/exampleAdded",
	payload: "Add Example Successfully!"
}
```

#### ActionCreatorsè¡ŒåŠ¨åˆ›é€ è€…  
`ActionCreators`æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šåˆ›å»ºå’Œè¿”å›ä¸€ä¸ª`Action`å¯¹è±¡  
```
const text = "Add Example Successfully Again!"
const addExample =  text => {
	type: "example/exampleAdded",
	payload: text
}
```

#### Reducerså‡é€Ÿå™¨  


#### Storeå•†åº—  
#### Dispatché€‰æ‹©


### å®‰è£…ä¾èµ–
1. `npm install redux@toolkit --save`

æœ¬æ–‡å¸®åŠ©æ›´å¥½çš„å¿«é€Ÿä½¿ç”¨ç®€å•é€»è¾‘çš„çŠ¶æ€ç®¡ç†ï¼Œè®©ä½ èƒ½å¤Ÿèµ°é€šä¸€ä¸ª`view -> action -> state -> view`çš„å¾ªç¯æµç¨‹  


[å‚è€ƒæ–‡æ¡£ä¸€ â€”â€”â€”â€” Reduxå®˜æ–¹ä½¿ç”¨è¯´æ˜ï¼ˆå†™çš„é€šä¿—æ˜“æ‡‚ä¸”è¯¦ç»†ï¼Œä¸è¿‡æ˜¯è‹±æ–‡çš„ï¼‰](https://redux.js.org/usage/index)  
[å‚è€ƒæ–‡æ¡£äºŒ â€”â€”â€”â€” Reduxå®˜æ–¹æ•™ç¨‹ï¼ˆæ¨èæ‰‹æ•²ä¸€éå®˜æ–¹ç¤ºä¾‹ï¼Œå®˜æ–¹æä¾›ç¤ºä¾‹ä»£ç ä¸‹è½½ï¼‰](https://redux.js.org/tutorials/index)  
[å‚è€ƒæ–‡æ¡£ä¸‰ â€”â€”â€”â€” Redux@Toolkitï¼ˆæ¨èé˜…è¯»ï¼Œå®˜æ–¹å¼ºçƒˆæ¨èä½¿ç”¨ç°ä»£å¼€å‘åŒ…ï¼‰](https://redux.js.org/tutorials/fundamentals/part-8-modern-redux)  
[å‚è€ƒæ–‡æ¡£å›› â€”â€”â€”â€” createsliceä¸­ extraReducerså‚æ•°çš„è¯´æ˜](https://redux-toolkit.js.org/api/createslice)  
[å‚è€ƒæ–‡æ¡£äº” â€”â€”â€”â€” å¼‚æ­¥æ“ä½œä¸­é—´ä»¶](https://redux-toolkit.js.org/api/createAsyncThunk)  
[å‚è€ƒæ–‡æ¡£å…­ â€”â€”â€”â€” Reduxä¸­æ–‡æ–‡æ¡£](https://www.redux.org.cn/)  
[å‚è€ƒæ–‡æ¡£ä¸ƒ â€”â€”â€”â€” ä¸ºä»€ä¹ˆ(ä»€ä¹ˆæ—¶å€™)ä½¿ç”¨Reduxï¼Ÿï¼ˆä¸‰å¼ å›¾ï¼‰](https://blog.csdn.net/haoaiqian/article/details/78625200)  
[å‚è€ƒæ–‡æ¡£å…« â€”â€”â€”â€” å‰ç«¯è¿½æ¢¦äººRedux Toolkitæ•™ç¨‹(ç®€åŒ–reduxçš„ä½¿ç”¨)](https://blog.csdn.net/ilovethesunshine/article/details/109627560)  
[å‚è€ƒæ–‡æ¡£ä¹ â€”â€”â€”â€” ç”¨redux-toolkit æ”¹é€ ä½ çš„redux](https://juejin.cn/post/6844904129178009613)  
[å‚è€ƒæ–‡æ¡£å â€”â€”â€”â€” React å’Œ Redux ä¸­çš„ä¸å˜æ€§ï¼šå®Œæ•´æŒ‡å—](https://daveceddia.com/react-redux-immutability-guide/)  


æˆ‘æ˜¯ [fx67ll.com](https://fx67ll.com)ï¼Œå¦‚æœæ‚¨å‘ç°æœ¬æ–‡æœ‰ä»€ä¹ˆé”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºæŒ‡æ­£ï¼Œæ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼  
å¦‚æœæ‚¨å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæ¬¢è¿è®¿é—®æˆ‘çš„ [æœ¬æ–‡githubä»“åº“åœ°å€]()ï¼Œä¸ºæˆ‘ç‚¹ä¸€é¢—Starï¼ŒThanks~ :)  
***è½¬å‘è¯·æ³¨æ˜å‚è€ƒæ–‡ç« åœ°å€ï¼Œéå¸¸æ„Ÿè°¢ï¼ï¼ï¼***![](react-redux_files/1.png)